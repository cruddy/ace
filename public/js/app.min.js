(function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};Cruddy.Inputs.Code=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.initialize=function(a){var b,d;return this.$el.height((null!=(d=a.height)?d:100)+"px"),this.editor=ace.edit(this.el),a.theme&&this.editor.setTheme("ace/theme/"+a.theme),b=this.editor.getSession(),a.mode&&b.setMode("ace/mode/"+a.mode),a.wordwrap&&b.setUseWrapMode(!0),b.setWrapLimitRange(null,null),c.__super__.initialize.apply(this,arguments)},c.prototype.applyChanges=function(a,b){return b&&(this.editor.setValue(a),this.editor.getSession().getSelection().clearSelection()),this},c.prototype.render=function(){return this.editor.on("blur",function(a){return function(){return a.model.set(a.key,a.editor.getValue(),{input:a})}}(this)),c.__super__.render.apply(this,arguments)},c.prototype.remove=function(){var a;return null!=(a=this.editor)&&a.destroy(),this.editor=null,c.__super__.remove.apply(this,arguments)},c.prototype.focus=function(){var a;return null!=(a=this.editor)&&a.focus(),this},c}(Cruddy.Inputs.Base),Cruddy.Inputs.Markdown=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.events={"show.bs.tab [data-toggle=tab]":"showTab","shown.bs.tab [data-toggle=tab]":"shownTab"},c.prototype.initialize=function(a){var b;return this.height=null!=(b=a.height)?b:200,this.editorInput=new Cruddy.Inputs.Code({model:this.model,key:this.key,theme:a.theme,mode:"markdown",height:this.height}),c.__super__.initialize.apply(this,arguments)},c.prototype.showTab=function(a){return"preview"===$(a.target).data("tab")&&this.renderPreview(),this},c.prototype.shownTab=function(a){return"editor"===$(a.traget).data("tab")?this.editorInput.focus():void 0},c.prototype.render=function(){return this.$el.html(this.template()),this.$(".tab-pane-editor").append(this.editorInput.render().el),this.preview=this.$(".tab-pane-preview"),this},c.prototype.renderPreview=function(){return this.preview.html(marked(this.getValue())),this},c.prototype.template=function(){return'<div class="markdown-editor">\n    <a href="https://help.github.com/articles/github-flavored-markdown" target="_blank" class="hint">GitHub flavored markdown</a>\n\n    <ul class="nav nav-tabs">\n        <li class="active"><a href="#'+this.cid+'-editor" data-toggle="tab" data-tab="editor" tab-index="-1">'+Cruddy.lang.markdown_source+'</a></li>\n        <li><a href="#'+this.cid+'-preview" data-toggle="tab" data-tab="preview" tab-index="-1">'+Cruddy.lang.markdown_parsed+'</a></li>\n    </ul>\n\n    <div class="tab-content">\n        <div class="tab-pane-editor tab-pane active" id="'+this.cid+'-editor"></div>\n        <div class="tab-pane-preview tab-pane" id="'+this.cid+'-preview" style="height:'+this.height+'px"></div>\n    </div>\n</div>'},c.prototype.focus=function(){var a;return a=this.$("[data-tab=editor]"),a.hasClass("active")?this.editorInput.focus():a.tab("show"),this},c}(Cruddy.Inputs.Base),Cruddy.Fields.Code=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.createEditableInput=function(a){return new Cruddy.Inputs.Code({model:a,key:this.id,height:this.attributes.height,mode:this.attributes.mode,theme:this.attributes.theme,wordwrap:this.attributes.wordwrap})},c.prototype.format=function(a){return a?'<div class="limit-height">'+a+"</div>":NOT_AVAILABLE},c}(Cruddy.Fields.Base),Cruddy.Fields.Markdown=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.createEditableInput=function(a){return new Cruddy.Inputs.Markdown({model:a,key:this.id,height:this.attributes.height,theme:this.attributes.theme})},c.prototype.format=function(a){return a?'<div class="well limit-height">'+marked(a)+"</div>":NOT_AVAILABLE},c}(Cruddy.Fields.Base)}).call(this);
//# sourceMappingURL=app.min.map